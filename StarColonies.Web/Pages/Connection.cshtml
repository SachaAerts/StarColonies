@page
@model Connection

@{
    ViewData["Title"] = "Connection";
    Layout = "Shared/_Layout";
}

<div class="mainFrame">
        <form method="post" class="formConnectionRegister connectForm active" asp-page-handler="Login">
            <input asp-for="ConnectionUser.EmailOrUsernameConnection" type="hidden" id="email-connection-hidden" />
            <input asp-for="ConnectionUser.PasswordConnection" type="hidden" id="password-connection-hidden" />
            
            <div>
                <space-input id="email-connection-input" label="Email or username" label-position="50" required></space-input>
                <span asp-validation-for="ConnectionUser.EmailOrUsernameConnection" class="text-danger"></span>
            </div>
            
            <div>
                <space-input id="password-connection-input" label="Password" label-position="50" required></space-input>
                <span asp-validation-for="ConnectionUser.PasswordConnection" class="text-danger"></span>
            </div>
            
            <div>
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <button class="formButton" type="submit">Connect</button>
            </div>
        </form>

        <div class="backgroundConnection">
            <div class="selectRow">
                <div class="selectConnectionRegister connection active">
                    <h2 class="selectTitle">Connection</h2>
                    <svg class="selectFrame connectFrame" width="198" height="48" viewBox="0 0 198 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1.64178 15.1194L10.4218 1H196.057V33.0896L187.904 46.5672H1.64178V15.1194Z" fill="#2E4073" stroke="#152F49" stroke-width="2"/>
                    </svg>
                </div>

                <div class="selectConnectionRegister register">
                    <h2 class="selectTitle">Register</h2>
                    <svg class="selectFrame registerFrame" width="198" height="48" viewBox="0 0 198 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1.64178 15.1194L10.4218 1H196.057V33.0896L187.904 46.5672H1.64178V15.1194Z" fill="#2E4073" stroke="#152F49" stroke-width="2"/>
                    </svg>
                </div>
            </div>
            <svg width="380" height="432" viewBox="0 0 380 432" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1.5 15L10 1.5H347H378.373V33.5L371 46L378.373 60.9318V410.984L359.005 431H10.3718L1 421.315L1.5 15Z" fill="#161C2B" stroke="#152F49" stroke-width="2"/>
            </svg>
        </div>
</div>

<script src="~/js/components/inputs/input.js"></script>

<script>
    const connectForm = document.querySelector(".connectForm");

    connectForm.addEventListener("submit", () => {
        const emailUsernameConnectionComponent = document.querySelector("#email-connection-input");
        const passwordConnectionComponent = document.querySelector("#password-connection-input");

        const emailUsernameConnectionValue = emailUsernameConnectionComponent.shadowRoot.querySelector("input").value;
        const passwordConnectionValue = passwordConnectionComponent.shadowRoot.querySelector("input").value;

        document.querySelector("#email-connection-hidden").value = emailUsernameConnectionValue;
        document.querySelector("#password-connection-hidden").value = passwordConnectionValue;
    });


    document.addEventListener("DOMContentLoaded", () => {
        const registerBtn = document.querySelector(".selectConnectionRegister.register");
        
        if (registerBtn) {
            registerBtn.addEventListener("click", () => {
                window.location.href = "/Register";
            });
        }
    });


</script>
